<!DOCTYPE html>
<html>

<head>
    <script>
        function changetext() {
            var text = document.getElementById("lineedit").value;
            WebViewJavascriptBridge.callHandler(
                'test'
                // , {'text':text}
                , text
                , function (responseData) {
                    document.getElementById("hh").innerHTML = responseData;
                }
            );
        }

        function connectWebViewJavascriptBridge(callback) {
            if (window.WebViewJavascriptBridge) {
                callback(WebViewJavascriptBridge)
            } else {
                document.addEventListener(
                    'WebViewJavascriptBridgeReady'
                    , function () {
                        callback(WebViewJavascriptBridge)
                    },
                    false
                );
            }
        }
        // 第一连接时初始化bridage
        connectWebViewJavascriptBridge(function (bridge) {
            console.log('connectWebViewJavascriptBridge start');
            bridge.init(function (message, responseCallback) {
                console.log('JS got a message', message);
                var data = {
                    'Javascript Responds': '测试中文!'
                };
                console.log('JS responding with', data);
                responseCallback(data);
            });
        })

        function enterLiveLaunchPage() {
            WebViewJavascriptBridge.callHandler(
                'enterLiveLaunchPage'
                , { 'topic': "" }
                , function (responseData) {
                    document.getElementById("hh").innerHTML = "发起直播完成";
                }
            );
        }

        function enterLiveRoom() {
            var liveID = document.getElementById("roomIdText").value;
            WebViewJavascriptBridge.callHandler(
                'enterLiveRoom'
                , { 'liveID': liveID }
                , function (responseData) {
                    document.getElementById("hh").innerHTML = "进入直播间完成";
                }
            );
        }

        function openChatPage() {
            var userId = document.getElementById("userIdText").value;
            WebViewJavascriptBridge.callHandler(
                'openChatPage'
                , { 'userID': userId }
                , function (responseData) {
                    document.getElementById("hh").innerHTML = "发起聊天完成";
                }
            );
        }

        function openUserHomePage() {
            var userId = document.getElementById("userIdText").value;
            WebViewJavascriptBridge.callHandler(
                'openUserHomePage'
                , { 'userID': userId }
                , function (responseData) {
                    document.getElementById("hh").innerHTML = "进入空间完成";
                }
            );
        }
        
        function getProductVersion() {
            WebViewJavascriptBridge.callHandler(
                'getProductVersion'
                , function (responseData) {
                    document.getElementById("hh").innerHTML = responseData.version;
                }
            );
        }

        function openExchangeEarningsPage() {
            WebViewJavascriptBridge.callHandler(
                'openExchangeEarningsPage'
                , function (responseData) {
                    document.getElementById("hh").innerHTML = "打开兑换页完成";
                }
            );
        }
    </script>

    <title>Test BoxBridgeWebView</title>
</head>

<body>

    <h1>BoxBridgeWebView js调用java测试</h1>
    <h2 id="hh">输入文字：</h2>
    <input type="text" name="lineedit" id="lineedit" />
    <input type="button" name="okbutton" id="okbutton" onclick="changetext()" value="确定" />
    <!-- 开直播 -->
    <p>
        <input type="button" name="enterLiveLaunchPage" id="enterLiveLaunchPage" onclick="enterLiveLaunchPage()" value="发起直播" />
    </p>
    <!-- 进直播间 -->
    <p>
        <input type="text" name="roomIdText" id="roomIdText" />
        <input type="button" name="enterLiveRoom" id="enterLiveRoom" onclick="enterLiveRoom()" value="进入直播间" />
    </p>
    <h3>----------------------------------------</h3>
    <!-- 用户相关 -->
    <p>
        用户ID：
        <input type="text" name="userIdText" id="userIdText" />
    </p>
    <p>
        <input type="button" name="openChatPage" id="openChatPage" onclick="openChatPage()" value="发起聊天" />
    </p>
    <p>
        <input type="button" name="openUserHomePage" id="openUserHomePage" onclick="openUserHomePage()" value="进入空间" />
    </p>
    <!-- 其他 -->
    <h3>----------------------------------------</h3>
    <p>
        <input type="button" name="getProductVersion" id="getProductVersion" onclick="getProductVersion()" value="获得系统版本号" />
    </p>
    <p>
        <input type="button" name="openExchangeEarningsPage" id="openExchangeEarningsPage" onclick="openExchangeEarningsPage()" value="打开兑换收益页" />
    </p>
</body>

</html>